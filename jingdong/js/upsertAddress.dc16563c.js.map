{"version":3,"sources":["webpack:///./src/effects/addressEffect.js","webpack:///./src/components/Address.vue","webpack:///./src/components/Address.vue?b542","webpack:///./src/views/upsertAddress/UpsertAddress.vue","webpack:///./src/views/upsertAddress/UpsertAddress.vue?fe12","webpack:///./src/components/Address.vue?7ffd","webpack:///./src/views/upsertAddress/UpsertAddress.vue?07db","webpack:///./src/views/chooseAddressList/ChooseAddressList.vue","webpack:///./src/views/chooseAddressList/ChooseAddressList.vue?7096","webpack:///./src/views/chooseAddressList/ChooseAddressList.vue?5fd1"],"names":["useCommonAddressEffect","store","useStore","getAddressList","forceUpdate","addressList","state","length","get","result","data","commit","class","address","name","phone","city","department","houseNumber","props","render","__scopeId","handleBackClick","addressId","upsertAddress","placeholder","formData","router","getAddressItem","errno","back","setup","route","params","id","key","_id","handleAddressClick","components","Address","shopId","push"],"mappings":"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","file":"js/upsertAddress.dc16563c.js","sourcesContent":["import { useStore } from 'vuex'\nimport { get } from '@/utils/request'\n\nconst useCommonAddressEffect = () => {\n  const store = useStore()\n\n  const getAddressList = async forceUpdate => {\n    const addressList = store.state.addressList\n    if (forceUpdate || !addressList.length) {\n      const result = await get('/api/user/address')\n      if (result?.data?.length) {\n        store.commit('changeAddressList', result.data)\n      }\n    }\n  }\n\n  return { getAddressList }\n}\n\nexport default useCommonAddressEffect\n","<template>\n  <div class=\"address\">\n    <div class=\"address__info\">\n      <div class=\"address__info__user\">{{address.name}}</div>\n      <div class=\"address__info__phone\">{{address.phone}}</div>\n    </div>\n    <div class=\"address__detail\">\n      {{address.city}}{{address.department}}{{address.houseNumber}}\n    </div>\n    <div class=\"iconfont address__icon\">&#xe6f2;</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Address',\n  props: ['address']\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/stylesheets/variables.scss';\n.address {\n  position: relative;\n  margin: .16rem .18rem 0 .18rem;\n  padding: .18rem .64rem .18rem .16rem;\n  background: #FFF;\n  border-radius: .04rem;\n  &__info {\n    display: flex;\n    line-height: .2rem;\n    font-size: .14rem;\n    color: $light-fontColor;\n    &__user {\n      width: .94rem;\n    }\n    &__phone {\n      flex: 1;\n    }\n  }\n  &__detail {\n    margin-top: .08rem;\n    line-height: .2rem;\n    font-size: .14rem;\n    color: $content-fontColor;\n  }\n  &__icon {\n    position: absolute;\n    right: .2rem;\n    top: .4rem;\n    transform: rotate(180deg);\n    font-size: .2rem;\n    color: $light-fontColor;\n  }\n}\n</style>\n","import { render } from \"./Address.vue?vue&type=template&id=16b98676&scoped=true\"\nimport script from \"./Address.vue?vue&type=script&lang=js\"\nexport * from \"./Address.vue?vue&type=script&lang=js\"\n\nimport \"./Address.vue?vue&type=style&index=0&id=16b98676&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-16b98676\"\n\nexport default script","<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">\n      <div\n        class=\"iconfont title__back\"\n        @click=\"handleBackClick\"\n      >&#xe6a3;</div>\n      <div class=\"title__text\">\n        {{addressId ? '编辑收货地址': '新建收货地址'}}\n      </div>\n      <div class=\"title__save\" @click=\"upsertAddress\">保存</div>\n    </div>\n    <div class=\"form\">\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">所在城市:</div>\n        <input class=\"form__item__content\" placeholder=\"如北京市\" v-model=\"formData.city\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">小区/大厦/学校:</div>\n        <input class=\"form__item__content\" placeholder=\"如理工大学国防科技园\" v-model=\"formData.department\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">楼号-门牌号:</div>\n        <input class=\"form__item__content\" placeholder=\"A号楼B层\" v-model=\"formData.houseNumber\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">收货人:</div>\n        <input class=\"form__item__content\" placeholder=\"请填写收货人的姓名\" v-model=\"formData.name\" />\n      </div>\n      <div class=\"form__item\">\n        <div class=\"form__item__label\">联系电话:</div>\n        <input class=\"form__item__content\" placeholder=\"请填写收货手机号\" v-model=\"formData.phone\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { toRefs, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport { post, get, patch } from '@/utils/request'\nimport useCommonAddressEffect from '@/effects/addressEffect'\n\nconst useAddressEffect = () => {\n  const store = useStore()\n  const { addressList } = toRefs(store.state)\n  const { getAddressList } = useCommonAddressEffect()\n  getAddressList()\n\n  return { addressList }\n}\n\nconst useFormEffect = (addressId) => {\n  const router = useRouter()\n  const formData = reactive({\n    city: '', department: '', houseNumber: '', name: '', phone: ''\n  })\n\n  const getAddressItem = async () => {\n    const result = await get(`/api/user/address/${addressId}`)\n    if (result?.errno === 0 && result?.data) {\n      const { city, department, houseNumber, name, phone } = result.data\n      formData.city = city\n      formData.department = department\n      formData.houseNumber = houseNumber\n      formData.name = name\n      formData.phone = phone\n    }\n  }\n\n  const upsertAddress = async () => {\n    const result = addressId\n      ? await patch(`/api/user/address/${addressId}`, { data: formData })\n      : await post('/api/user/address', { data: formData })\n\n    if (result?.errno === 0) router.back()\n  }\n\n  if (addressId) getAddressItem()\n\n  return { formData, upsertAddress }\n}\n\nexport default {\n  name: 'MyAddressList',\n  setup () {\n    const router = useRouter()\n    const route = useRoute()\n    const addressId = route.params?.id\n    const handleBackClick = () => { router.back() }\n\n    return {\n      addressId,\n      handleBackClick,\n      ...useAddressEffect(),\n      ...useFormEffect(addressId)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/stylesheets/variables.scss';\n\n.wrapper {\n  overflow-y: auto;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: $light-content-bgColor;\n}\n.title {\n  display: flex;\n  line-height: .44rem;\n  background: $bgColor;\n  font-size: .16rem;\n  color: $content-fontColor;\n  text-align: center;\n  &__back {\n    width: .2rem;\n    margin-left: .18rem;\n    font-size: .2rem;\n    color: $search-fontColor;\n  }\n  &__text {\n    flex: 1;\n    text-align: center;\n  }\n  &__save {\n    margin-right: .2rem;\n    font-size: .14rem;\n  }\n}\n.form {\n  padding: 0 .2rem;\n  margin-top: .12rem;\n  background: $bgColor;\n  border-top: .01rem solid $content-bgColor;\n  border-bottom: .01rem solid $content-bgColor;\n  &__item {\n    display: flex;\n    padding: .12rem 0;\n    line-height: .2rem;\n    font-size: .14rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &:last-of-type {\n      border-bottom: none;\n    }\n    &__label {\n      margin-right: .05rem;\n      color: $medium-fontColor;\n    }\n    &__content {\n      flex: 1;\n      border: none;\n      outline: none;\n      color: #3F3F3F;\n      &::placeholder {\n        color: #3F3F3F;\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./UpsertAddress.vue?vue&type=template&id=75bfb4eb&scoped=true\"\nimport script from \"./UpsertAddress.vue?vue&type=script&lang=js\"\nexport * from \"./UpsertAddress.vue?vue&type=script&lang=js\"\n\nimport \"./UpsertAddress.vue?vue&type=style&index=0&id=75bfb4eb&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-75bfb4eb\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Address.vue?vue&type=style&index=0&id=16b98676&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UpsertAddress.vue?vue&type=style&index=0&id=75bfb4eb&lang=scss&scoped=true\"","<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">\n      <div\n        class=\"iconfont title__icon\"\n        @click=\"handleBackClick\"\n      >&#xe6f2;</div>\n      收货地址\n    </div>\n    <Address\n      v-for=\"address in addressList\"\n      :key=\"address._id\"\n      :address=\"address\"\n      @click=\"() => handleAddressClick(address._id)\"\n    />\n  </div>\n</template>\n\n<script>\nimport { toRefs } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter, useRoute } from 'vue-router'\nimport Address from '@/components/Address'\nimport useCommonAddressEffect from '@/effects/addressEffect'\n\nexport default {\n  name: 'ChooseAddressList',\n  components: { Address },\n  setup () {\n    const store = useStore()\n    const router = useRouter()\n    const route = useRoute()\n    const shopId = route.params.shopId\n    const { addressList } = toRefs(store.state)\n    const { getAddressList } = useCommonAddressEffect()\n    getAddressList()\n    const handleBackClick = () => { router.back() }\n    const handleAddressClick = (addressId) => {\n      router.push(`/orderConfirmation/${shopId}/${addressId}`)\n    }\n    return {\n      addressList,\n      handleBackClick,\n      handleAddressClick\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/assets/stylesheets/variables.scss';\n\n.wrapper {\n  overflow-y: auto;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  background: $light-content-bgColor;\n}\n.title {\n  position: relative;\n  line-height: .44rem;\n  background: $bgColor;\n  font-size: .16rem;\n  color: $content-fontColor;\n  text-align: center;\n  &__icon {\n    position: absolute;\n    left: .18rem;\n    top: 0;\n    font-size: .2rem;\n  }\n}\n</style>\n","import { render } from \"./ChooseAddressList.vue?vue&type=template&id=613e8ba0&scoped=true\"\nimport script from \"./ChooseAddressList.vue?vue&type=script&lang=js\"\nexport * from \"./ChooseAddressList.vue?vue&type=script&lang=js\"\n\nimport \"./ChooseAddressList.vue?vue&type=style&index=0&id=613e8ba0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-613e8ba0\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChooseAddressList.vue?vue&type=style&index=0&id=613e8ba0&lang=scss&scoped=true\""],"sourceRoot":""}
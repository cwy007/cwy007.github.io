(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"03a7":function(t,e,c){},"0b55":function(t,e,c){"use strict";c("cf4a")},1148:function(t,e,c){"use strict";var n=c("a691"),r=c("1d80");t.exports="".repeat||function(t){var e=String(r(this)),c="",a=n(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(c+=e);return c}},"2dcc":function(t,e,c){},"3c97":function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var n=c("5502"),r=function(){var t=Object(n["b"])(),e=t.state.cartList,c=function(e,c,n,r){t.commit("changeCartItemInfo",{shopId:e,productId:c,productInfo:n,num:r})};return{cartList:e,changeCartItemInfo:c}}},"408a":function(t,e,c){var n=c("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"5f6f":function(t,e,c){"use strict";c.r(e);c("b0c0");var n=c("7a23"),r=Object(n["I"])("data-v-fefb0d6a");Object(n["t"])("data-v-fefb0d6a");var a={class:"wrapper"},o={class:"search"},i=Object(n["h"])("div",{class:"search__content"},[Object(n["h"])("span",{class:"search__content__icon iconfont"},""),Object(n["h"])("input",{type:"text",class:"search__content__input",placeholder:"请输入商品名称搜索"})],-1);Object(n["r"])();var s=r((function(t,e,c,r,s,u){var d=Object(n["x"])("ShopInfo"),l=Object(n["x"])("Content"),b=Object(n["x"])("Cart");return Object(n["q"])(),Object(n["d"])("div",a,[Object(n["h"])("div",o,[Object(n["h"])("div",{class:"search__back iconfont",onClick:e[1]||(e[1]=function(){return r.handleBackClick&&r.handleBackClick.apply(r,arguments)})},""),i]),Object(n["G"])(Object(n["h"])(d,{item:r.item,showBorder:!1},null,8,["item"]),[[n["D"],r.item.imgUrl]]),Object(n["h"])(l,{shopName:r.item.name},null,8,["shopName"]),Object(n["h"])(b)])})),u=(c("96cf"),c("1da1")),d=c("6c02"),l=c("b775"),b=c("d7d0"),h=Object(n["I"])("data-v-2234938c");Object(n["t"])("data-v-2234938c");var _={class:"content"},p={class:"category"},j={class:"product"},O={class:"product__item__detail"},f={class:"product__item__title"},m={class:"product__item__sales"},v={class:"product__item__price"},g=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),C={class:"product__item__origin"},k={class:"product__number"};Object(n["r"])();var I=h((function(t,e,c,r,a,o){return Object(n["q"])(),Object(n["d"])("div",_,[Object(n["h"])("div",p,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(t.categories,(function(e){return Object(n["q"])(),Object(n["d"])("div",{key:e.tab,class:["category__item",{"category__item--active":t.currentTab===e.tab}],onClick:function(c){return t.currentTab=e.tab}},Object(n["z"])(e.name),11,["onClick"])})),128))]),Object(n["h"])("div",j,[(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(t.list,(function(e){return Object(n["q"])(),Object(n["d"])("div",{class:"product__item",key:e._id},[Object(n["h"])("img",{class:"product__item__img",src:e.imgUrl,alt:"tomato"},null,8,["src"]),Object(n["h"])("div",O,[Object(n["h"])("h4",f,Object(n["z"])(e.name),1),Object(n["h"])("p",m,"月售 "+Object(n["z"])(e.sales)+" 件",1),Object(n["h"])("p",v,[g,Object(n["g"])(Object(n["z"])(e.price)+" ",1),Object(n["h"])("span",C,"¥"+Object(n["z"])(e.oldPrice),1)])]),Object(n["h"])("div",k,[Object(n["G"])(Object(n["h"])("span",{class:"product__number__minus iconfont",innerHTML:"",onClick:function(n){return t.changeCartItem(t.shopId,e._id,e,-1,c.shopName)}},null,8,["onClick"]),[[n["D"],t.getProductCartCount(t.shopId,e._id)]]),Object(n["G"])(Object(n["h"])("span",null,Object(n["z"])(t.getProductCartCount(t.shopId,e._id)),513),[[n["D"],t.getProductCartCount(t.shopId,e._id)]]),Object(n["h"])("span",{class:"product__number__plus iconfont",innerHTML:"",onClick:function(n){return t.changeCartItem(t.shopId,e._id,e,1,c.shopName)}},null,8,["onClick"])])])})),128))])])})),w=c("5530"),y=c("3c97"),x=c("5502"),L=function(){var t=[{name:"全部商品",tab:"all"},{name:"秒杀",tab:"seckill"},{name:"新鲜水果",tab:"fruit"}],e=Object(n["v"])(t[0].tab),c=Object(n["u"])({list:[]}),r=Object(d["c"])(),a=r.params.id,o=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])("/api/shop/".concat(a,"/products"),{tab:e.value});case 2:r=t.sent,0===(null===r||void 0===r?void 0:r.errno)&&null!==r&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.length&&(c.list=r.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n["F"])(o);var i=Object(n["A"])(c),s=i.list;return{list:s,shopId:a,categories:t,currentTab:e}},z=function(){var t=Object(x["b"])(),e=Object(y["a"])(),c=e.cartList,n=e.changeCartItemInfo,r=function(e,c,r,a,o){n(e,c,r,a),t.commit("changeShopName",{shopId:e,shopName:o})},a=function(t,e){var n,r;return(null===c||void 0===c||null===(n=c[t])||void 0===n||null===(r=n.productList[e])||void 0===r?void 0:r.count)||0};return{changeCartItem:r,getProductCartCount:a}},q={name:"Content",props:["shopName"],setup:function(){return Object(w["a"])(Object(w["a"])({},L()),z())}};c("681c");q.render=I,q.__scopeId="data-v-2234938c";var S=q,B=Object(n["I"])("data-v-fb95d36a");Object(n["t"])("data-v-fb95d36a");var N={class:"cart"},P={key:0,class:"product"},T={class:"product__header"},F={class:"product__header__all"},M=Object(n["g"])("全选 "),D={class:"product__header__clear"},H={class:"product__item__detail"},R={class:"product__item__title"},G={class:"product__item__price"},U=Object(n["h"])("span",{class:"product__item__yen"},"¥",-1),E={class:"product__item__origin"},A={class:"product__number"},J={class:"check"},W={class:"check__icon"},Z={class:"check__icon__tag"},K={class:"check__info"},Q=Object(n["g"])(" 总计："),V={class:"check__info__price"},X=Object(n["h"])("div",{class:"check__btn"},"去结算",-1);Object(n["r"])();var Y=B((function(t,e,c,r,a,o){var i=Object(n["x"])("router-link");return Object(n["q"])(),Object(n["d"])(n["a"],null,[t.showCart?(Object(n["q"])(),Object(n["d"])("div",{key:0,class:"mask",onClick:e[1]||(e[1]=function(e){return t.handleCartShowChange(t.total)})})):Object(n["e"])("",!0),Object(n["h"])("div",N,[t.showCart?(Object(n["q"])(),Object(n["d"])("div",P,[Object(n["h"])("div",T,[Object(n["h"])("div",F,[Object(n["h"])("span",{class:["product__header__icon","iconfont",{"product__header__icon--active":t.allChecked}],innerHTML:t.allChecked?"":"",onClick:e[2]||(e[2]=function(e){return t.setCartItemsChecked(t.shopId)})},null,10,["innerHTML"]),M]),Object(n["h"])("div",D,[Object(n["h"])("span",{class:"product__header__clear__btn",onClick:e[3]||(e[3]=function(e){return t.emptyCartProducts(t.shopId)})},"清空购物车")])]),(Object(n["q"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(t.productList,(function(e){return Object(n["q"])(),Object(n["d"])(n["a"],null,[e.count>0?(Object(n["q"])(),Object(n["d"])("div",{class:"product__item",key:e._id},[Object(n["h"])("div",{class:["product__item__check","iconfont",{"product__item__check--active":e.check}],innerHTML:e.check?"":"",onClick:function(c){return t.changeCartItemChecked(t.shopId,e._id)}},null,10,["innerHTML","onClick"]),Object(n["h"])("img",{class:"product__item__img",src:e.imgUrl,alt:"tomato"},null,8,["src"]),Object(n["h"])("div",H,[Object(n["h"])("h4",R,Object(n["z"])(e.name),1),Object(n["h"])("p",G,[U,Object(n["g"])(Object(n["z"])(e.price)+" ",1),Object(n["h"])("span",E,"¥"+Object(n["z"])(e.oldPrice),1)])]),Object(n["h"])("div",A,[Object(n["h"])("span",{class:"product__number__minus iconfont",onClick:function(c){return t.changeCartItemInfo(t.shopId,e._id,e,-1)}},"",8,["onClick"]),Object(n["h"])("span",null,Object(n["z"])(e.count||0),1),Object(n["h"])("span",{class:"product__number__plus iconfont",onClick:function(c){return t.changeCartItemInfo(t.shopId,e._id,e,1)}},"",8,["onClick"])])])):Object(n["e"])("",!0)],64)})),256))])):Object(n["e"])("",!0),Object(n["h"])("div",J,[Object(n["h"])("div",W,[Object(n["h"])("img",{class:"check__icon__img",src:"https://tva1.sinaimg.cn/large/008eGmZEly1gmhkhuoxkuj302c026gle.jpg",alt:"bucket",onClick:e[4]||(e[4]=function(e){return t.handleCartShowChange(t.total)})}),Object(n["h"])("div",Z,Object(n["z"])(t.total),1)]),Object(n["h"])("div",K,[Q,Object(n["h"])("span",V,"¥ "+Object(n["z"])(t.price),1)]),Object(n["G"])(Object(n["h"])(i,{to:{name:"OrderConfirmation",params:{id:t.shopId}}},{default:B((function(){return[X]})),_:1},8,["to"]),[[n["D"],t.showSubmitBtn]])])])],64)})),$=(c("a623"),c("4de4"),c("b680"),c("07ac"),function(){var t=Object(x["b"])(),e=Object(d["c"])(),c=e.params.id,r=Object(y["a"])(),a=r.cartList,o=r.changeCartItemInfo,i=Object(n["v"])(!1),s=function(t){0!==t&&(i.value=!i.value)},u=Object(n["b"])((function(){var t=a[c]||{},e=t.productList;if(e)for(var n in e)if(e[n].check)return l.value>0;return!1})),l=Object(n["b"])((function(){var t=a[c]||{},e=t.productList,n=0;if(e)for(var r in e)n+=e[r].count;return 0===n&&(i.value=!1),n})),b=Object(n["b"])((function(){var t=a[c]||{},e=t.productList,n=0;if(e)for(var r in e)e[r].check&&(n+=e[r].count*e[r].price);return n.toFixed(2)})),h=Object(n["b"])((function(){var t;return(null===(t=a[c])||void 0===t?void 0:t.productList)||{}})),_=Object(n["b"])((function(){var t,e=Object.values((null===(t=a[c])||void 0===t?void 0:t.productList)||{});return e.filter((function(t){return t.count>0})).every((function(t){return t.check}))})),p=function(e,c){t.commit("changeCartItemChecked",{shopId:e,productId:c})},j=function(e){t.commit("emptyCartProducts",{shopId:e})},O=function(e){t.commit("setCartItemsChecked",{shopId:e})};return{shopId:c,total:l,price:b,productList:h,allChecked:_,changeCartItemInfo:o,changeCartItemChecked:p,emptyCartProducts:j,setCartItemsChecked:O,handleCartShowChange:s,showCart:i,showSubmitBtn:u}}),tt={name:"Cart",setup:function(){return Object(w["a"])({},$())}};c("9dd1");tt.render=Y,tt.__scopeId="data-v-fb95d36a";var et=tt,ct=function(){var t=Object(d["c"])(),e=Object(n["u"])({item:{imgUrl:"",name:""}}),c=function(){var c=Object(u["a"])(regeneratorRuntime.mark((function c(){var n;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return c.next=2,Object(l["a"])("/api/shop/".concat(t.params.id));case 2:n=c.sent,0===(null===n||void 0===n?void 0:n.errno)&&null!==n&&void 0!==n&&n.data&&(e.item=n.data);case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}(),r=Object(n["A"])(e),a=r.item;return{item:a,getItemData:c}},nt=function(){var t=Object(d["d"])(),e=function(){t.back()};return{handleBackClick:e}},rt={name:"Shop",components:{ShopInfo:b["a"],Content:S,Cart:et},setup:function(){var t=ct(),e=t.item,c=t.getItemData,n=nt(),r=n.handleBackClick;return c(),{item:e,handleBackClick:r}}};c("6d66");rt.render=s,rt.__scopeId="data-v-fefb0d6a";e["default"]=rt},"681c":function(t,e,c){"use strict";c("e2f2")},"6d66":function(t,e,c){"use strict";c("2dcc")},"9dd1":function(t,e,c){"use strict";c("03a7")},a623:function(t,e,c){"use strict";var n=c("23e7"),r=c("b727").every,a=c("a640"),o=c("ae40"),i=a("every"),s=o("every");n({target:"Array",proto:!0,forced:!i||!s},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},b680:function(t,e,c){"use strict";var n=c("23e7"),r=c("a691"),a=c("408a"),o=c("1148"),i=c("d039"),s=1..toFixed,u=Math.floor,d=function(t,e,c){return 0===e?c:e%2===1?d(t,e-1,c*t):d(t*t,e/2,c)},l=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},b=s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){s.call({})}));n({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,c,n,i,s=a(this),b=r(t),h=[0,0,0,0,0,0],_="",p="0",j=function(t,e){var c=-1,n=e;while(++c<6)n+=t*h[c],h[c]=n%1e7,n=u(n/1e7)},O=function(t){var e=6,c=0;while(--e>=0)c+=h[e],h[e]=u(c/t),c=c%t*1e7},f=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==h[t]){var c=String(h[t]);e=""===e?c:e+o.call("0",7-c.length)+c}return e};if(b<0||b>20)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(_="-",s=-s),s>1e-21)if(e=l(s*d(2,69,1))-69,c=e<0?s*d(2,-e,1):s/d(2,e,1),c*=4503599627370496,e=52-e,e>0){j(0,c),n=b;while(n>=7)j(1e7,0),n-=7;j(d(10,n,1),0),n=e-1;while(n>=23)O(1<<23),n-=23;O(1<<n),j(1,1),O(2),p=f()}else j(0,c),j(1<<-e,0),p=f()+o.call("0",b);return b>0?(i=p.length,p=_+(i<=b?"0."+o.call("0",b-i)+p:p.slice(0,i-b)+"."+p.slice(i-b))):p=_+p,p}})},cf4a:function(t,e,c){},d7d0:function(t,e,c){"use strict";c("b0c0");var n=c("7a23"),r=Object(n["I"])("data-v-7bc0943a");Object(n["t"])("data-v-7bc0943a");var a={class:"shop"},o={class:"shop__content__title"},i={class:"shop__content__tags"},s={class:"shop__content__tag"},u={class:"shop__content__tag"},d={class:"shop__content__tag"},l={class:"shop__content__highlight"};Object(n["r"])();var b=r((function(t,e,c,r,b,h){return Object(n["q"])(),Object(n["d"])("div",a,[Object(n["h"])("img",{src:c.item.imgUrl,alt:"shop__img",class:"shop__img"},null,8,["src"]),Object(n["h"])("div",{class:{shop__content:!0,"shop__content--bordered":c.showBorder}},[Object(n["h"])("div",o,Object(n["z"])(c.item.name),1),Object(n["h"])("div",i,[Object(n["h"])("span",s,"月售"+Object(n["z"])(c.item.sales),1),Object(n["h"])("span",u,"起送￥"+Object(n["z"])(c.item.expressLimit),1),Object(n["h"])("span",d,"基础运费￥"+Object(n["z"])(c.item.expressPrice),1)]),Object(n["h"])("p",l,Object(n["z"])(c.item.slogan),1)],2)])})),h={name:"ShopInfo",props:{item:{type:Object},showBorder:{type:Boolean,default:!0}}};c("0b55");h.render=b,h.__scopeId="data-v-7bc0943a";e["a"]=h},e2f2:function(t,e,c){}}]);
//# sourceMappingURL=shop.be16d9b3.js.map
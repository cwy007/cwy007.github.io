(function(e){function t(t){for(var n,c,u=t[0],i=t[1],d=t[2],s=0,f=[];s<u.length;s++)c=u[s],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,d||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var i=r[c];0!==a[i]&&(n=!1)}n&&(o.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},o=[];function c(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-0b65ffb6":"f3a7fdb8","chunk-2d0a3196":"b32bb0b7","chunk-2d0a3577":"a28c980f","chunk-2d0a40c8":"1356e1b6","chunk-2d0a43df":"2f140f4d","chunk-2d0aa90c":"40622e71","chunk-2d0aab07":"701375c5","chunk-2d0abc00":"15856d80","chunk-2d0ae937":"dddc3b44","chunk-2d0aeb45":"8c5db0e0","chunk-2d0af08c":"315697cb","chunk-2d0afa49":"1877412b","chunk-2d0b2762":"01369112","chunk-2d0b6187":"89557801","chunk-2d0ba136":"a8f6aefc","chunk-2d0bb267":"bb6d3923","chunk-2d0bcec1":"411f3779","chunk-2d0bdf38":"4f49285a","chunk-2d0bff92":"d59ac7b0","chunk-2d0c0494":"115e6260","chunk-2d0c0a09":"8a5d026a","chunk-2d0c4313":"ead46746","chunk-2d0c46d1":"22d49e50","chunk-2d0c512b":"778bf5d1","chunk-2d0c86e3":"c14ff875","chunk-2d0cf16e":"ad921531","chunk-2d0d056d":"f95f1e5a","chunk-2d0d0645":"54e8b1f4","chunk-2d0d2f22":"6fe79351","chunk-2d0d61fd":"1b41151f","chunk-2d0d7e63":"d59e9c3b","chunk-2d0dda4e":"40c052fa","chunk-2d0de971":"70523bc1","chunk-2d0e1b57":"15edb8eb","chunk-2d0e1fbe":"1ff6bd9b","chunk-2d0e22d6":"0d5655a1","chunk-2d0e4fe5":"eaa76f35","chunk-2d0e542a":"5c2e34ff","chunk-2d0e57ec":"23d2913b","chunk-2d0e6553":"11a1c0ca","chunk-2d0e6c86":"c0856675","chunk-2d0ea098":"7215bb3b","chunk-2d0f0a11":"9dbbb6df","chunk-2d208ac5":"85fe5f4b","chunk-2d209408":"52527139","chunk-2d20f745":"599b8a8e","chunk-2d20ff23":"0bbbe453","chunk-2d2138c7":"5d2ccad4","chunk-2d216f3b":"fb30a14d","chunk-2d217e5b":"29d8e041","chunk-2d21b84a":"ae6f861f","chunk-2d21dcd2":"6fb195a2","chunk-2d21f327":"9a8cbd2a","chunk-2d2214b3":"c6b28fdb","chunk-2d221799":"5afd9262","chunk-2d221814":"6e6d73f5","chunk-2d221a34":"f920e9ba","chunk-2d22502a":"79050227","chunk-2d226775":"b16bd190","chunk-2d229411":"eeb33856","chunk-2d2295e9":"ab1d37e9","chunk-2d22c171":"5ac0d3b4","chunk-2d22c2b8":"d0c72880","chunk-2d22ca58":"220263f5","chunk-2d2311f7":"6277f166","chunk-2d237ee7":"e6d3fcbb","chunk-2d238465":"2577af0d","chunk-30597b4a":"0eb98ea2","chunk-7532b3ea":"c098a6dc","chunk-e13e4362":"ca927f79"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,u.nc&&i.setAttribute("nonce",u.nc),i.src=c(e);var d=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(s);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,r[1](d)}a[e]=void 0}};var s=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=d;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n,a=r("7a23"),o=(r("d81d"),r("b0c0"),r("d3b7"),r("25f0"),r("ade3")),c=r("1f3b"),u=r("c2c6"),i=Object(c["createUseStyles"])({container:{border:"1px solid #eee",display:"flex",flexDirection:"column",borderRadius:5},title:{backgroundColor:"#eee",padding:"10px 0",paddingLeft:20},code:{flexGrow:1}}),d=Object(a["defineComponent"])({name:"MonacoEditor",props:{code:{type:String,required:!0},onChange:{type:Function,required:!0},title:{type:String,required:!0}},setup:function(e){var t,r=Object(a["shallowRef"])(),n=Object(a["ref"])(),o=!1;Object(a["onMounted"])((function(){var a=r.value=u["editor"].create(n.value,{value:e.code,language:"json",formatOnPaste:!0,tabSize:2,minimap:{enabled:!1}});t=a.onDidChangeModelContent((function(t){o||e.onChange(a.getValue(),t)}))})),Object(a["onBeforeMount"])((function(){t&&t.dispose()})),Object(a["watch"])((function(){return e.code}),(function(e){var t=r.value,n=t.getModel();e!==n.getValue()&&(t.pushUndoStop(),o=!0,n.pushEditOperations([],[{range:n.getFullModelRange(),text:e}]),t.pushUndoStop(),o=!1)}));var c=i();return function(){var t=c.value;return Object(a["createVNode"])("div",{class:t.container},[Object(a["createVNode"])("div",{class:t.title},[Object(a["createVNode"])("span",null,[e.title])]),Object(a["createVNode"])("div",{class:t.code,ref:n},null)])}}}),s={name:"Simple",schema:{description:"A simple form example.",type:"object",required:["firstName","lastName"],properties:{firstName:{type:"string",default:"Chuck",title:"firstName",minLength:10},lastName:{type:"string",title:"lastName"},telephone:{type:"string",minLength:10,title:"telephone"},multiTypeArray:{type:"array",items:[{type:"string",title:"string"},{type:"number",title:"number"}],title:"multiTypeArray"},singleTypeArray:{type:"array",title:"singleTypeArray",items:{type:"object",properties:{name:{type:"string",title:"name"},age:{type:"number",title:"age"}}}},multiSelectArray:{type:"array",items:{type:"string",enum:["foo","bar","foobar"]},title:"multiSelectArray"}}},uiSchema:{title:"A registration form",properties:{firstName:{title:"First name"},lastName:{title:"Last name"},telephone:{title:"Telephone"}}},default:{firstName:"Chuck",lastName:"Norris",age:75,bio:"Roundhouse kicking asses since 1940",password:"noneed",singleTypeArray:[{name:"cwy",age:28}]}},l=(r("96cf"),r("1da1")),f=r("5530");(function(e){e["NUMBER"]="number",e["INTEGER"]="integer",e["STRING"]="string",e["OBJECT"]="object",e["ARRAY"]="array",e["BOOLEAN"]="boolean"})(n||(n={}));var p={schema:{type:Object,required:!0},value:{required:!0},onChange:{type:Function,required:!0},rootSchema:{type:Object,required:!0},errorSchema:{type:Object,required:!0},uiSchema:{type:Object,required:!0}},b={value:{},onChange:{type:Function,required:!0},errors:{type:Object},schema:{type:Object,required:!0},options:{type:Object}},m=Object(f["a"])(Object(f["a"])({},b),{},{options:{type:Array,required:!0}});function h(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["isVNode"])(e)}var v=Object(c["createUseStyles"])({container:{},label:{display:"block",color:"#777"},errorText:{color:"red",fontSize:12,margin:"5px 0",padding:0,paddingLeft:20}}),O=Object(a["defineComponent"])({name:"FormItem",props:b,setup:function(e,t){var r=t.slots,n=v();return function(){var t=n.value,o=e.schema,c=e.errors;return Object(a["createVNode"])("div",{class:t.container},[Object(a["createVNode"])("label",{class:t.label},[o.title]),r.default&&r.default(),Object(a["createVNode"])("ul",{class:t.errorText},[null===c||void 0===c?void 0:c.map((function(e){return Object(a["createVNode"])("li",null,h(e)?e:{default:function(){return[e]}})}))])])}}});function y(e){return Object(a["defineComponent"])({name:"Wrapped".concat(e.name),props:b,setup:function(t,r){var n=r.attrs;return function(){var r;return Object(a["createVNode"])(O,t,h(r=Object(a["createVNode"])(e,Object(a["mergeProps"])(t,n),null))?r:{default:function(){return[r]}})}}})}var j=y(Object(a["defineComponent"])({name:"PasswordWidget",props:b,setup:function(e){var t=function(t){var r=t.target.value;t.target.value=e.value,e.onChange(r)};return function(){var r=e.value;return Object(a["createVNode"])("input",{type:"password",value:r,onInput:t},null)}}})),g=j,k={name:"demo",schema:{type:"object",properties:{pass1:{type:"string",minLength:10,title:"password"},pass2:{type:"string",minLength:10,title:"re-try password"},color:{type:"string",format:"color",title:"Input Color"},testkeyword:{type:"string",minLength:10,test:"true",title:"keyword test"}}},default:{pass1:"",pass2:"",color:"#861818",testkeyword:""},uiSchema:{properties:{pass1:{widget:g},pass2:{color:"red"}}},customValidate:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){setTimeout((function(){e.pass1!=e.pass2&&t.pass2.addError("密码必须相同"),r(!0)}),2e3)})));case 1:case"end":return r.stop()}}),r)})))()}},w=[k,s],S=(r("4160"),r("13d5"),r("159b"),r("ebd9")),N=r.n(S),C=(r("a4d3"),r("e01a"),Symbol());function A(){var e=Object(a["inject"])(C);if(!e)throw Error("SchemaForm needed");return e}r("99af"),r("a623"),r("4de4"),r("7db0"),r("a630"),r("caad"),r("fb6a"),r("b64b"),r("6062"),r("2532"),r("3ca3"),r("2ca0"),r("ddb0");var V=r("2909"),x=r("a38e"),P=r("15fd"),R=r("53ca"),_=r("0011"),F=r.n(_),q=r("13bb"),T=r.n(q),E=r("1601"),I=r.n(E);function M(e){return"object"===Object(R["a"])(e)&&null!==e&&!Array.isArray(e)}function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var U=new N.a;function L(e,t){var r=U.validate(e,t);return{valid:r,errors:U.errors}}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(W(e,"$ref"))return J(e,t,r);if(W(e,"dependencies")){var n=G(e,t,r);return $(n,t,r)}return W(e,"allOf")&&Array.isArray(e.allOf)?Object(f["a"])(Object(f["a"])({},e),{},{allOf:e.allOf.map((function(e){return $(e,t,r)}))}):e}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!M(e))return{};var n=K(e,t,r);if("allOf"in e)try{n=I()(Object(f["a"])(Object(f["a"])({},n),{},{allOf:n.allOf}))}catch(u){console.warn("could not merge subschemas in allOf:\n"+u);var a=n,o=(a.allOf,Object(P["a"])(a,["allOf"]));return o}var c=n.hasOwnProperty("additionalProperties")&&!1!==n.additionalProperties;return c?D(n,t,r):n}var B="__additional_property";function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=Object(f["a"])(Object(f["a"])({},e),{},{properties:Object(f["a"])({},e.properties)}),Object.keys(r).forEach((function(n){var a;e.properties.hasOwnProperty(n)||(a=e.additionalProperties.hasOwnProperty("$ref")?$({$ref:e.additionalProperties["$ref"]},t,r):e.additionalProperties.hasOwnProperty("type")?Object(f["a"])({},e.additionalProperties):{type:te(r[n])},e.properties[n]=a,e.properties[n][B]=!0)})),e}function J(e,t,r){var n=z(e.$ref,t),a=(e.$ref,Object(P["a"])(e,["$ref"]));return $(Object(f["a"])(Object(f["a"])({},n),a),t,r)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if(!e.startsWith("#"))throw new Error("Could not find a definition for ".concat(r,"."));e=decodeURIComponent(e.substring(1));var n=F.a.get(t,e);if(void 0===n)throw new Error("Could not find a definition for ".concat(r,"."));return W(n,"$ref")?z(n.$ref,t):n}function G(e,t,r){var n=e.dependencies,a=void 0===n?{}:n,o=Object(P["a"])(e,["dependencies"]);return"oneOf"in o?o=o.oneOf[re(r,o.oneOf,t)]:"anyOf"in o&&(o=o.anyOf[re(r,o.anyOf,t)]),Y(a,o,t,r)}function Y(e,t,r,n){for(var a in e)if(void 0!==n[a]&&(!t.properties||a in t.properties)){var o=e[a],c=Object(P["a"])(e,[a].map(x["a"]));return Array.isArray(o)?t=H(t,o):M(o)&&(t=Z(t,r,n,a,o)),Y(c,t,r,n)}return t}function H(e,t){if(!t)return e;var r=Array.isArray(e.required)?Array.from(new Set([].concat(Object(V["a"])(e.required),Object(V["a"])(t)))):t;return Object(f["a"])(Object(f["a"])({},e),{},{required:r})}function Z(e,t,r,n,a){var o=$(a,t,r),c=o.oneOf,u=Object(P["a"])(o,["oneOf"]);if(e=X(e,u),void 0===c)return e;if(!Array.isArray(c))throw new Error("invalid: it is some ".concat(Object(R["a"])(c)," instead of an array"));var i=c.map((function(e){return W(e,"$ref")?J(e,t,r):e}));return Q(e,t,r,n,i)}function Q(e,t,r,n,a){var c=a.filter((function(e){if(!e.properties)return!1;var t=e.properties[n];if(t){var a={type:"object",properties:Object(o["a"])({},n,t)},c=L(a,r),u=c.errors;return!u||0===u.length}}));if(1!==c.length)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;var u=c[0],i=u.properties,d=(i[n],Object(P["a"])(i,[n].map(x["a"]))),s=Object(f["a"])(Object(f["a"])({},u),{},{properties:d});return X(e,$(s,t,r))}function X(e,t){var r=Object.assign({},e);return Object.keys(t).reduce((function(r,n){var a=e?e[n]:{},o=t[n];return e&&W(e,n)&&M(o)?r[n]=X(a,o):e&&t&&("object"===ee(e)||"object"===ee(t))&&"required"===n&&Array.isArray(a)&&Array.isArray(o)?r[n]=T()(a,o):r[n]=o,r}),r)}function ee(e){var t=e.type;if(!t&&e.const)return te(e.const);if(!t&&e.enum)return"string";if(!t&&(e.properties||e.additionalProperties))return"object";var r=t;return r instanceof Array&&2===r.length&&r.includes("null")?r.find((function(e){return"null"!==e})):t}var te=function(e){return Array.isArray(e)?"array":"string"===typeof e?"string":null==e?"null":"boolean"===typeof e?"boolean":isNaN(e)?"object"===Object(R["a"])(e)?"object":"string":"number"};function re(e,t,r){for(var n=0;n<t.length;n++){var a=t[n];if(a.properties){var o={anyOf:Object.keys(a.properties).map((function(e){return{required:[e]}}))},c=void 0;if(a.anyOf){var u=Object.assign({},a);u.allOf?u.allOf=u.allOf.slice():u.allOf=[],u.allOf.push(o),c=u}else c=Object.assign({},a,o);if(delete c.required,r(c,e))return n}else if(r(t[n],e))return n}return 0}var ne=Symbol(),ae=Object(a["defineComponent"])({name:"VJSFThemeProvider",props:{theme:{type:Object,required:!0}},setup:function(e,t){var r=t.slots,n=Object(a["computed"])((function(){return e.theme}));return Object(a["provide"])(ne,n),function(){return r.default&&r.default()}}});function oe(e,t){var r=A();if(t){var n=t.uiSchema,o=t.schema;if(null!==n&&void 0!==n&&n.widget&&M(n.widget))return Object(a["ref"])(n.widget);if(o.format&&r.formatMapRef.value[o.format])return Object(a["ref"])(r.formatMapRef.value[o.format])}var c=Object(a["inject"])(ne);if(!c)throw Error("vjsf theme required");return Object(a["computed"])((function(){return c.value.widgets[e]}))}var ce=ae,ue=Object(a["defineComponent"])({name:"NumberField",props:p,setup:function(e){var t=function(t){console.log("v",t),e.onChange(t)},r=oe("NumberWidget");return function(){var n=r.value,o=e.value,c=e.errorSchema,u=e.schema;return Object(a["createVNode"])(n,{value:o,onChange:t,errors:c.__errors,schema:u},null)}}}),ie=Object(a["defineComponent"])({name:"StringField",props:p,setup:function(e){var t=function(t){e.onChange(t)},r=Object(a["computed"])((function(){return oe("TextWidget",e).value})),n=Object(a["computed"])((function(){var t=e.uiSchema,r=(t.widget,t.properties,t.items,Object(P["a"])(t,["widget","properties","items"]));return r}));return function(){var o=r.value,c=e.value,u=e.schema,i=e.errorSchema;return Object(a["createVNode"])(o,{value:c,onChange:t,schema:u,errors:i.__errors,options:n.value},null)}}}),de=Object(a["defineComponent"])({name:"ObjectField",props:p,setup:function(e){var t=A(),r=function(t,r){var n=M(e.value)?e.value:{};console.log("v",Object(R["a"])(r)),void 0===r?delete n[t]:n[t]=r,e.onChange(n)};return function(){var n=e.schema,o=e.rootSchema,c=e.value,u=e.errorSchema,i=e.uiSchema,d=t.SchemaItem,s=n.properties||{},l=M(c)?c:{};return Object.keys(s).map((function(e,t){return Object(a["createVNode"])(d,{schema:s[e],rootSchema:o,value:l[e],key:t,onChange:function(t){return r(e,t)},errorSchema:u[e]||{},uiSchema:i.properties&&i.properties[e]||{}},null)}))}}});r("a434"),r("a9e3");function se(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["isVNode"])(e)}var le=Object(c["createUseStyles"])({container:{border:"1px solid #eee"},actions:{background:"#eee",padding:10,textAlign:"right"},action:{"& + &":{marignRight:10}},content:{padding:10}}),fe=Object(a["defineComponent"])({name:"ArrayItemWrapper",props:{onAdd:{type:Function,required:!0},onDelete:{type:Function,required:!0},onUp:{type:Function,required:!0},onDown:{type:Function,required:!0},index:{type:Number,required:!0}},setup:function(e,t){var r=t.slots,n=le(),o=function(){return e.onAdd(e.index)},c=function(){return e.onDelete(e.index)},u=function(){return e.onUp(e.index)},i=function(){return e.onDown(e.index)};return function(){var e=n.value;return Object(a["createVNode"])("div",{class:e.container},[Object(a["createVNode"])("div",{class:e.actions},[Object(a["createVNode"])("button",{class:e.action,onClick:o},[Object(a["createTextVNode"])("新增")]),Object(a["createVNode"])("button",{class:e.action,onClick:c},[Object(a["createTextVNode"])("删除")]),Object(a["createVNode"])("button",{class:e.action,onClick:u},[Object(a["createTextVNode"])("上移")]),Object(a["createVNode"])("button",{class:e.action,onClick:i},[Object(a["createTextVNode"])("下移")])]),Object(a["createVNode"])("div",{class:e.content},[r.default&&r.default()])])}}}),pe=Object(a["defineComponent"])({name:"ArrayField",props:p,setup:function(e){var t=A(),r=function(t,r){var n=e.value,a=Array.isArray(n)?n:[];a[r]=t,e.onChange(a)},n=function(t){var r=e.value,n=Array.isArray(r)?r:[];n.splice(t+1,0,void 0),e.onChange(n)},o=function(t){var r=e.value,n=Array.isArray(r)?r:[];n.splice(t,1),e.onChange(n)},c=function(t){var r=e.value,n=Array.isArray(r)?r:[],a=n.splice(t,1);n.splice(t-1,0,a[0]),e.onChange(n)},u=function(t){var r=e.value,n=Array.isArray(r)?r:[];if(t!==n.length-1){var a=n.splice(t,1);n.splice(t+1,0,a[0]),e.onChange(n)}},i=oe("SelectionWidget");return function(){var d=i.value,s=e.schema,l=e.rootSchema,f=e.value,p=e.errorSchema,b=e.uiSchema,m=t.SchemaItem,h=Array.isArray(s.items),v=s.items&&s.items.enum;if(h){var O=s.items,y=Array.isArray(f)?f:[];return O.map((function(e,t){var n=b.items,o=Array.isArray(n)?n[t]||{}:n||{};return Object(a["createVNode"])(m,{key:t,schema:e,rootSchema:l,value:y[t],onChange:function(e){return r(e,t)},errorSchema:p[t]||{},uiSchema:o},null)}))}if(v){var j=s.items.enum,g=j.map((function(e){return{key:e,value:e}}));return Object(a["createVNode"])(d,{onChange:e.onChange,value:e.value,options:g,errors:p.__errors,schema:s},null)}var k=Array.isArray(f)?f:[];return k.map((function(e,t){var i;return Object(a["createVNode"])(fe,{index:t,onAdd:n,onDelete:o,onUp:c,onDown:u},se(i=Object(a["createVNode"])(m,{schema:s.items,uiSchema:b.items||{},value:e,rootSchema:l,onChange:function(e){return r(e,t)},key:t,errorSchema:p[t]||{}},null))?i:{default:function(){return[i]}})}))}}}),be=Object(a["defineComponent"])({name:"SchemaItem",props:p,setup:function(e){var t=A(),r=Object(a["computed"])((function(){var r=e.schema,n=e.rootSchema,a=e.value;return t.transformSchemaRef.value($(r,n,a))}));return function(){var t,o=e.schema,c=r.value,u=o.type;switch(u){case n.STRING:t=ie;break;case n.NUMBER:t=ue;break;case n.OBJECT:t=de;break;case n.ARRAY:t=pe;break;default:console.warn("".concat(u," is not supported"))}return Object(a["createVNode"])(t,Object(a["mergeProps"])(e,{schema:c}),null)}}}),me=(r("5d41"),r("ac1f"),r("1276"),r("b85c")),he=r("2298");function ve(e){return e.length<1?{}:e.reduce((function(e,t){var r=t.property,n=void 0===r?"":r,a=t.message,o=n.split("/"),c=e;o.length>0&&""===o[0]&&o.splice(0,1);var u,i=Object(me["a"])(o.slice(0));try{for(i.s();!(u=i.n()).done;){var d=u.value;d in c||(c[d]={}),c=c[d]}}catch(s){i.e(s)}finally{i.f()}return Array.isArray(c.__errors)?c.__errors=c.__errors.concat(a||""):a&&(c.__errors=[a]),e}),{})}function Oe(e){return null===e||void 0===e?[]:e.map((function(e){var t=e.keyword,r=e.dataPath,n=e.schemaPath,a=e.params,o=e.message;return{name:t,property:"".concat(r),schemaPath:n,params:a,message:o}}))}function ye(e,t,r){return je.apply(this,arguments)}function je(){return je=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,o,c,u,i,d,s,l,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=f.length>3&&void 0!==f[3]?f[3]:"zh",o=f.length>4?f[4]:void 0,c=null;try{t.validate(n,r)}catch(p){c=p}if(he[a](t.errors),u=Oe(t.errors),c&&(u=[].concat(Object(V["a"])(u),[{message:c.message}])),i=ve(u),o){e.next=10;break}return e.abrupt("return",{errors:u,errorSchema:i,valid:0===u.length});case 10:return d=ge(),e.next=13,o(r,d);case 13:return s=ke(i,d,!0),l=we(s),e.abrupt("return",{errors:l,errorSchema:s,valid:0===l.length});case 16:case"end":return e.stop()}}),e)}))),je.apply(this,arguments)}function ge(){var e={};return new Proxy(e,{get:function(e,t,r){if("addError"===t)return function(t){var n=Reflect.get(e,"__errors",r);n&&Array.isArray(n)?n.push(t):e.__errors=[t]};var n=Reflect.get(e,t,r);if(void 0===n){var a=ge();return e[t]=a,a}return n}})}function ke(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.assign({},e);return Object.keys(t).reduce((function(n,a){var o=e?e[a]:{},c=t[a];return e&&e.hasOwnProperty(a)&&M(c)?n[a]=ke(o,c,r):r&&Array.isArray(o)&&Array.isArray(c)?n[a]=o.concat(c):n[a]=c,n}),n)}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",r=[];return"__errors"in e&&(r=r.concat((e.__errors||[]).map((function(e){return{message:"".concat(t,": ").concat(e)}})))),Object.keys(e).reduce((function(t,r){return"__errors"!==r&&(t=t.concat(we(e[r],r))),t}),r)}var Se={allErrors:!0},Ne=Object(a["defineComponent"])({name:"SchemaForm",props:{schema:{type:Object,required:!0},uiSchema:{type:Object},value:{required:!0},onChange:{type:Function,required:!0},contextRef:{type:Object},ajvOptions:{type:Object},locale:{type:String,default:"zh"},customValidate:{type:Function},customFormats:{type:[Array,Object]},customKeywords:{type:[Array,Object]}},setup:function(e){var t=function(t){e.onChange(t)},r=Object(a["computed"])((function(){if(e.customFormats){var t=Array.isArray(e.customFormats)?e.customFormats:[e.customFormats];return t.reduce((function(e,t){return e[t.name]=t.component,e}),{})}})),n=Object(a["computed"])((function(){if(e.customKeywords){var t=Array.isArray(e.customKeywords)?e.customKeywords:[e.customKeywords];return function(e){var r=e;return t.forEach((function(t){r[t.name]&&(r=t.transformSchema(e))})),r}}return function(e){return e}})),o={SchemaItem:be,formatMapRef:r,transformSchemaRef:n};Object(a["provide"])(C,o);var c=Object(a["shallowRef"])({}),u=Object(a["shallowRef"])();Object(a["watchEffect"])((function(){if(u.value=new N.a(Object(f["a"])(Object(f["a"])({},Se),e.ajvOptions)),e.customFormats){var t=Array.isArray(e.customFormats)?e.customFormats:[e.customFormats];t.forEach((function(e){u.value.addFormat(e.name,e.definition)}))}if(e.customKeywords){var r=Array.isArray(e.customKeywords)?e.customKeywords:[e.customKeywords];r.forEach((function(e){u.value.addKeyword(e.definition)}))}}));var i=Object(a["ref"])(),d=Object(a["ref"])(0);function s(){return p.apply(this,arguments)}function p(){return p=Object(l["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("start validate ---------\x3e"),r=d.value+=1,t.next=4,ye(u.value,e.value,e.schema,e.locale,e.customValidate);case 4:if(n=t.sent,r===d.value){t.next=7;break}return t.abrupt("return");case 7:console.log("end validate -----------\x3e"),c.value=n.errorSchema,i.value(n),i.value=void 0;case 11:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}return Object(a["watch"])((function(){return e.value}),(function(){i.value&&s()}),{deep:!0}),Object(a["watch"])((function(){return e.contextRef}),(function(){e.contextRef&&(e.contextRef.value={doValidate:function(){return new Promise((function(e){i.value=e,s()}))}})}),{immediate:!0}),function(){var r=e.schema,n=e.value,o=e.uiSchema;return Object(a["createVNode"])(be,{schema:r,uiSchema:o||{},rootSchema:r,value:n,onChange:t,errorSchema:c.value||{}},null)}}}),Ce=Ne,Ae=y(Object(a["defineComponent"])({name:"SelectionWidget",props:m,setup:function(e){var t=Object(a["ref"])(e.value||[]);return Object(a["watch"])(t,(function(t,r){t!==r&&e.onChange(t)})),Object(a["watch"])((function(){return e.value}),(function(e){e!==t.value&&(t.value=e)})),function(){var r=e.options;return Object(a["withDirectives"])(Object(a["createVNode"])("select",{multiple:!0,"onUpdate:modelValue":function(e){return t.value=e}},[r.map((function(e){return Object(a["createVNode"])("option",{value:e.value},[e.key])}))]),[[a["vModelSelect"],t.value]])}}})),Ve=Ae,xe=y(Object(a["defineComponent"])({name:"TextWidget",props:b,setup:function(e){var t=function(t){var r=t.target.value;t.target.value=e.value,e.onChange(r)},r=Object(a["computed"])((function(){return{color:e.options&&e.options.color||"black"}}));return function(){var n=e.value;return Object(a["createVNode"])("input",{type:"text",value:n,onInput:t,style:r.value},null)}}})),Pe=xe,Re=(r("9129"),y(Object(a["defineComponent"])({name:"NumberWidget",props:b,setup:function(e){var t=function(t){var r=t.target.value;t.target.value=e.value;var n=Number(r);Number.isNaN(n)?e.onChange(void 0):e.onChange(n)};return function(){var r=e.value;return Object(a["createVNode"])("input",{type:"number",value:r,onInput:t},null)}}}))),_e=Re,Fe={widgets:{SelectionWidget:Ve,TextWidget:Pe,NumberWidget:_e}},qe=y(Object(a["defineComponent"])({name:"ColorWidget",props:b,setup:function(e){var t=function(t){var r=t.target.value;t.target.value=e.value,e.onChange(r)},r=Object(a["computed"])((function(){return{color:e.options&&e.options.color||"black"}}));return function(){return Object(a["createVNode"])("input",{type:"color",value:e.value,onInput:t,style:r.value},null)}}})),Te={name:"color",definition:{type:"string",validate:/^#[0-9A-Za-z]{6}$/},component:qe},Ee=Te,Ie={name:"test",definition:{keyword:"test",macro:function(){return{minLength:10}}},transformSchema:function(e){return Object(f["a"])(Object(f["a"])({},e),{},{minLength:10})}},Me=Ie;function We(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Object(a["isVNode"])(e)}function Ue(e){return JSON.stringify(e,null,2)}var Le=Object(c["createUseStyles"])({container:{display:"flex",flexDirection:"column",height:"100%",width:"1200px",margin:"0 auto"},menu:{marginBottom:20},code:{width:700,flexShrink:0},codePanel:{minHeight:400,marginBottom:20},uiAndValue:{display:"flex",justifyContent:"space-between","& > *":{width:"46%"}},content:{display:"flex"},form:{padding:"0 20px",flexGrow:1},menuButton:{appearance:"none",borderWidth:0,backgroundColor:"transparent",cursor:"pointer",display:"inline-block",padding:15,borderRadius:5,"&:hover":{background:"#efefef"}},menuSelected:{background:"#337ab7",color:"#fff","&:hover":{background:"#337ab7"}}}),Ke=Object(a["defineComponent"])({setup:function(){var e=Object(a["ref"])(0),t=Object(a["reactive"])({schema:null,data:{},uiSchema:{},schemaCode:"",dataCode:"",uiSchemaCode:"",customValidate:void 0});Object(a["watchEffect"])((function(){var r=e.value,n=w[r];t.schema=n.schema,t.data=n.default,t.uiSchema=n.uiSchema,t.schemaCode=Ue(n.schema),t.dataCode=Ue(n.default),t.uiSchemaCode=Ue(n.uiSchema),t.customValidate=n.customValidate}));var r=Le(),n=function(e){t.data=e,t.dataCode=Ue(e)};function c(e,r){try{var n=JSON.parse(r);t[e]=n,t["".concat(e,"Code")]=r}catch(a){}}var u=function(e){return c("schema",e)},i=function(e){return c("data",e)},s=function(e){return c("uiSchema",e)},l=Object(a["ref"])(),f=Object(a["ref"])(),p=function(){l.value.doValidate().then((function(e){console.log(e,"............")}))};return function(){var c,b=r.value,m=e.value;return Object(a["createVNode"])("div",{class:b.container},[Object(a["createVNode"])("div",{class:b.menu},[Object(a["createVNode"])("h1",null,[Object(a["createTextVNode"])("Vue3 JsonSchema Form")]),Object(a["createVNode"])("div",null,[w.map((function(t,r){var n;return Object(a["createVNode"])("button",{class:(n={},Object(o["a"])(n,b.menuButton,!0),Object(o["a"])(n,b.menuSelected,r===m),n),onClick:function(){return e.value=r}},[t.name])}))])])," ",Object(a["createVNode"])("div",{class:b.content},[Object(a["createVNode"])("div",{class:b.code},[Object(a["createVNode"])(d,{code:t.schemaCode,class:b.codePanel,onChange:u,title:"Schema"},null),Object(a["createVNode"])("div",{class:b.uiAndValue},[Object(a["createVNode"])(d,{code:t.uiSchemaCode,class:b.codePanel,onChange:s,title:"UISchema"},null),Object(a["createVNode"])(d,{code:t.dataCode,class:b.codePanel,onChange:i,title:"Value"},null)])]),Object(a["createVNode"])("div",{class:b.form},[Object(a["createVNode"])(ce,{theme:Fe},We(c=Object(a["createVNode"])(Ce,{schema:t.schema,value:t.data,onChange:n,contextRef:l,ref:f,customValidate:t.customValidate,uiSchema:t.uiSchema||{},customFormats:Ee,customKeywords:Me},null))?c:{default:function(){return[c]}}),Object(a["createVNode"])("button",{onClick:p},[Object(a["createTextVNode"])("校验")])])]),Object(a["createVNode"])("a",{href:"https://github.com/cwy007/vue3-json-schema-form",target:"_blank"},[Object(a["createTextVNode"])("github")])])}}});Object(a["createApp"])(Ke).mount("#app")}});
//# sourceMappingURL=app.e75093e6.js.map